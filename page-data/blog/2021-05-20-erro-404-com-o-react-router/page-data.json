{"componentChunkName":"component---src-templates-post-tsx","path":"/blog/2021-05-20-erro-404-com-o-react-router/","result":{"data":{"site":{"siteMetadata":{"title":"Jorge.Room"}},"markdownRemark":{"id":"1384c8dd-2533-5228-b97f-62fe9829d9dc","html":"<p>A meses atrás criei um projeto usando o <strong>create-react-app</strong> e usei o <strong>react-router</strong> para lidar com as rotas da minha aplicação front-end, porém ao enviar minha build para o servidor, acabei sendo introduzido a um problema, quando o usuário entrava em uma rota e atualizar a página ou quando ele acessava através de um link externo ele retornava o erro 404, devido ao arquivo não ter sido encontrado no endereço requisitado, para resolver isso usei regras de redirecionamento no servidor. Espero que minha solução possa ajudar quem também passar por esse problema.</p>\n<h2 id=\"resolvendo-no-apache-e-servidores-com-suporte-ao-arquivo-htaccess\" style=\"position:relative;\"><a href=\"#resolvendo-no-apache-e-servidores-com-suporte-ao-arquivo-htaccess\" aria-label=\"resolvendo no apache e servidores com suporte ao arquivo htaccess permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resolvendo no Apache e servidores com suporte ao arquivo .htaccess</h2>\n<p>Basta criar uma rota de redirecionamento, como exemplificado abaixo, primeiro crie um arquivo <code class=\"language-text\">.httaccess</code> na pasta public do seu projeto react. É importante que este arquivo esteja na raiz quando for feito sua build.</p>\n<p><a href=\"https://gist.github.com/Jorgen-Jr/d4b19ad2d89b538e466c11a828fc36d8\">O arquivo exemplificado pode ser encontrado aqui.</a></p>\n<deckgo-highlight-code language=\"xml\"  >\n          <code slot=\"code\">&lt;IfModule mod_rewrite.c&gt;\n\n  RewriteEngine On\n  RewriteBase /\n  RewriteRule ^index\\.html$ - [L]\n  RewriteCond %{REQUEST_FILENAME} !-f\n  RewriteCond %{REQUEST_FILENAME} !-d\n  RewriteCond %{REQUEST_FILENAME} !-l\n  RewriteRule . /index.html [L]\n\n&lt;/IfModule&gt;</code>\n        </deckgo-highlight-code>\n<h2 id=\"resolvendo-no-nginx-com-o-arquivo-de-configuraçao-nginxconf\" style=\"position:relative;\"><a href=\"#resolvendo-no-nginx-com-o-arquivo-de-configura%C3%A7ao-nginxconf\" aria-label=\"resolvendo no nginx com o arquivo de configuraçao nginxconf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resolvendo no NGINX com o arquivo de configuraçao nginx.conf</h2>\n<p>Acesse o arquivo de configuraço do seu nginx, normalmente localizado em /etc/nginx/conf.d/default.conf e adcione a linha <code class=\"language-text\">try_files $uri $uri/ /index.html;</code> como a seguir:</p>\n<p>Observando que apenas a linha <code class=\"language-text\">try_files $uri $uri/ /index.html;</code> foi alterada do meu arquivo de configuração padrão.\n<a href=\"https://gist.github.com/Jorgen-Jr/d639b2d0e9e72189e13539689e89aa39\">O mesmo pode ser encontrado aqui.</a></p>\n<deckgo-highlight-code language=\"textile\"  >\n          <code slot=\"code\">    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n\t    try_files $uri $uri/ /index.html;\n    }</code>\n        </deckgo-highlight-code>\n<h2 id=\"resolvendo-em-servidores-netlify\" style=\"position:relative;\"><a href=\"#resolvendo-em-servidores-netlify\" aria-label=\"resolvendo em servidores netlify permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resolvendo em servidores Netlify</h2>\n<p>Para resolver este tipo de erro ao subir em servidores do Netlify você precisa criar um arquivo <strong>_redirect</strong> na pasta public do seu projeto e adcionar a seguinte linha no arquivo. É importante que este arquivo esteja na raiz quando for feito sua build.</p>\n<p><a href=\"https://gist.github.com/Jorgen-Jr/7f866bfcb6c3a3f3b247101d515213a7\">O mesmo pode ser encontrado aqui.</a></p>\n<deckgo-highlight-code language=\"python\"  >\n          <code slot=\"code\">/*    /index.html   404</code>\n        </deckgo-highlight-code>","excerpt":"A meses atrás criei um projeto usando o create-react-app e usei o react-router para lidar com as rotas da minha aplicação front-end, porém ao enviar minha build para o servidor, acabei sendo introduzido a um problema, quando o usuário entrava em uma…","frontmatter":{"cover":"/images/uploads/pexels-photo-14303.webp","date":"22/07/2021 13:52","isBanner":false,"layout":"post","special":false,"title":"Resolvendo o Erro 404 com React Router"},"fields":{"slug":"/blog/2021-05-20-erro-404-com-o-react-router/"}},"count":{"totalCount":4},"previous":{"fields":{"slug":"/blog/2021-04-21-configurando-um-ambiente-de-testes-simples-com-docker/"},"frontmatter":{"title":"Configurando Um Ambiente de Testes Simples com Docker"}},"next":{"fields":{"slug":"/blog/2021-06-09-async-await-try-catch-infernal/"},"frontmatter":{"title":"Async/Await try-catch Infernal"}}},"pageContext":{"id":"1384c8dd-2533-5228-b97f-62fe9829d9dc","date":"2021-07-22","previousPostId":"51bf8bf9-be8b-592e-80f6-21e66bbc05e9","nextPostId":"7b06e957-5978-53c0-85c0-76a645afba48"}},"staticQueryHashes":["712016698"],"slicesMap":{}}